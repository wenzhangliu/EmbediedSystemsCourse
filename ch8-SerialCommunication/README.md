# 串行通信

```
作者：柳文章
日期：2025.4.11
```

## 基本概念

- **串行通信**：Serial communication，是指在计算机总线或其他数据通道上，每次传输一个位元数据，并连续进行以上单次过程的通信方式。串行通信可被用于长距离通信和大多数计算网络。
  - 异步串行通信：接收器和发送器有各自的时钟，非同步工作。一般由1个起始位、7-9个数据位、1-2个停止位、1个校验位组成。起始位约定为0，空闲位约定为1。
  - 同步串行通信：接收器和发送器由同一个时钟源控制。
- **并行通信**：Parallel communication，是指在串行端口上通过一次同时传输若干位元数据的方式进行通信。
- **波特率（BR）**：单位时间传输的数据位数，单位: bps (bit per second)。
- **串行通信的校验**：异步通信时可能出现帧格式错误、超时错误等传输错误。因此，一般考虑在通信过程中对数据差错进行校验，保证传输无误。
- **传输方式**：
  - 单工：消息只能单向传播，如遥控器；
  - 半双工：数据可以在一个信号载体的两个方向传播，但是不能同时进行，如对讲机。
  - 全双工：允许数据在两个方向上同时传播，相当于两个单工通信的结合。

## 通用同步异步收发器（USART）

USART 全称为“universal synchronous and asynchronous receiver-transmitter”。

### USART概述

两个引脚：
- RX：接受数据串行输入。
- TX：发送数据输出。当发送器被禁止时，输出引脚恢复到它的I/O端口配置。当发送器被激活，并且不发送数据时，TX引脚处于高电平状态。
- 总线在发送或接收前应处于空闲状态。
- 一个起始位。
- 一个数据字（8或9位），最低有效位在前。
- 0.5、1.5、2个的停止位，由此表明帧的结束。
- 使用分数波特率发生器——12位整数和4位小数的表示方法。
- 一个状态寄存器（USART_SR）。
- 数据寄存器（USART_DR）。
- 一个波特率寄存器（USART_BRR），12位的整数和4位小数。
- 一个智能卡模式下的保护时间寄存器（USART_GTPR）。

#### I/O口说明

STM32F103芯片有三组USART模块：USART1、USART2、USART3。

### USART帧格式

### USART寄存器

### USART库函数

## USART操作

### USART发送与接收

### 硬件流控制

### 奇偶校验

### USART中断请求

## STM32芯片USART其他功能模式及扩展说明

### USART其他功能模式

### RS-232接口

### 基于串口的无线通信

## USART应用实例

### 查询传送方式

### 中断传送方式

### 环形队列串口应用

## 串行同步通信（SPI）

### SPI接口概述

### SPI接口库函数

### SPI接口实例
